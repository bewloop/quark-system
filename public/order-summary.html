<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Order Summary | QUARK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== PRINT SETUP ===== */
@page {
  size: A4 portrait;
  margin: 20mm;
}

@media print {
  .no-print {
    display: none !important;
  }
}

/* ===== BASIC UI ===== */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  color: #000;
}

.container {
  max-width: 210mm;
  margin: auto;
  background: #fff;
  padding: 20mm;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo img {
  height: 50px;
}

.title {
  font-size: 20px;
  font-weight: bold;
}

.date {
  font-size: 14px;
  text-align: right;
}

/* ===== ACTION BUTTONS ===== */
.actions {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 10px;
}

.actions button {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.print-btn {
  background: #000;
  color: #fff;
}

.back-btn {
  background: #ddd;
}

/* ===== TABLE ===== */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

thead {
  display: table-header-group;
}

th, td {
  border: 1px solid #000;
  padding: 8px;
  vertical-align: top;
}

th {
  background: #f0f0f0;
  text-align: center;
}

tr {
  page-break-inside: avoid;
}

/* ===== FOOTER ===== */
.footer {
  margin-top: 30px;
  font-size: 12px;
  color: #555;
  text-align: right;
}
</style>
</head>

<body>

<!-- ACTION BUTTONS -->
<div class="actions no-print">
  <button class="print-btn" onclick="window.print()">üñ® Print</button>
  <button class="back-btn" onclick="goBack()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
</div>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="logo">
      <img src="images/logo.png" alt="QUARK Logo">
      <div class="title">‡πÉ‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ú‡∏•‡∏¥‡∏ï</div>
    </div>
    <div class="date" id="printDate"></div>
  </div>

  <!-- TABLE -->
  <table>
    <thead>
      <tr>
        <th style="width:5%">#</th>
        <th style="width:15%">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏£‡∏°</th>
        <th style="width:15%">‡∏£‡∏∏‡πà‡∏ô‡∏£‡∏ñ</th>
        <th style="width:10%">‡∏™‡∏µ‡∏û‡∏£‡∏°</th>
        <th style="width:15%">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
        <th style="width:20%">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
        <th style="width:20%">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
      </tr>
    </thead>
    <tbody id="orderBody">
      <!-- JS render -->
    </tbody>
  </table>

  <div class="footer">
    ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
  </div>

</div>

<script>
/* ===== DATE ===== */
const d = new Date();
document.getElementById('printDate').innerText =
  '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå: ' + d.toLocaleDateString('th-TH');

/* ===== LOAD DATA ===== */
/*
  ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:
  localStorage.setItem('order_summary', JSON.stringify([...orders]))
*/
const data = JSON.parse(localStorage.getItem('order_summary') || '[]');

const tbody = document.getElementById('orderBody');

if (!data.length) {
  tbody.innerHTML = `
    <tr>
      <td colspan="7" style="text-align:center; padding:20px;">
        ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      </td>
    </tr>
  `;
} else {
  data.forEach((o, i) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td style="text-align:center">${i + 1}</td>
      <td>${o.mat_type || ''}</td>
      <td>${o.car_model || ''}</td>
      <td>${o.mat_color || ''}</td>
      <td>${o.channel || ''}</td>
      <td>${o.customer || ''}</td>
      <td>${o.note || ''}</td>
    `;
    tbody.appendChild(tr);
  });
}

/* ===== NAV ===== */
function goBack() {
  window.location.href = '/order.html';
}

/* ===== AUTO PRINT (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) ===== */
// window.onload = () => window.print();
</script>

</body>
</html>
